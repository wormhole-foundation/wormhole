FROM rust:1.62@sha256:5777f201f507075309c4d2d1c1e8d8219e654ae1de154c844341050016a64a0c

RUN apt-get update && apt-get -y install libclang-dev jq cmake curl npm --no-install-recommends

WORKDIR /tmp

COPY sui/node_builder.sh  /tmp

RUN /tmp/node_builder.sh

RUN npm install -g n typescript ts-node
RUN n stable

COPY clients/js  /tmp/js
COPY sui/*.sh /tmp

WORKDIR /tmp/js

RUN make install

WORKDIR /tmp

RUN sui genesis -f
